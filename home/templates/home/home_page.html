{% load static wagtailcore_tags wagtailuserbar %}
{% load wagtailimages_tags %}

<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="author" content=""/>
    <title>

        {% block title %}
        {% if page.seo_title %}{{ page.seo_title }}{% else %}{{ page.title }}{% endif %}
        {% endblock %}
        {% block title_suffix %}
        {% wagtail_site as current_site %}
        {% if current_site and current_site.site_name %}- {{ current_site.site_name }}{% endif %}
        {% endblock %}
    </title>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="{% static 'assets/favicon.ico' %}"/>
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.15.4/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css"/>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css"/>
    <!-- Core theme CSS (includes Bootstrap)-->

    <link rel="stylesheet" type="text/css" href="{% static 'css/styles.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/home_page.css' %}">
    <style>
        .p-content {
            text-align: center;
            margin: 30px 0 0 30px;
        }
    </style>
</head>

<body id="page-top">
<!-- Navigation-->
<nav class="navbar navbar-expand-lg navbar-dark fixed-top bg-dark" id="mainNav">
    <div class="container">
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive"
                aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars ms-1"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
                <li class="nav-item"><a class="nav-link" href="/#maps">Maps</a></li>

                <li class="nav-item"><a class="nav-link" href="/#context">Context</a></li>
                <li class="nav-item"><a class="nav-link" href="/#projects">Projects</a></li>
                <li class="nav-item"><a class="nav-link" href="/introduction">Modules</a></li>
                <li class="nav-item"><a class="nav-link" href="/#team">Team</a></li>
                <li class="nav-item"><a class="nav-link" href="/#contact">Contact</a></li>
                <li class="nav-item">
                    {% if request.user.is_authenticated %}
                    <a class="nav-link nav-link-sp" href="/admin">Dashboard</a>
                    {% endif %}
                </li>
                <li class="nav-item">
                    {% if request.user.is_authenticated %}
                    <a class="nav-link nav-link-sp" href="{% url 'account_logout' %}">{{request.user.username }},
                        Logout</a>
                    {% else %}
                    <a class="nav-link nav-link-sp" href="{% url 'account_login' %}">Login</a>
                    {% endif %}
                </li>
            </ul>

        </div>
    </div>
</nav>
<!-- Masthead-->
<header class="masthead">
<!--    <a-->
<!--            href="https://indigenousengineering.org.au/painting-by-payi-cables-technology-and-engineering-april-2022/">-->
        <div class="container">
<!--            <div class="masthead-subheading">A Living Archive</div>-->
<!--            <div class="masthead-heading text-uppercase">Indigenous Engineering for an Enduring Culture</p>-->
<!--            </div>-->

        </div>
    </a>
</header>
<!-- Context-->
<section class="page-section" id="context">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Context for material </h2>
            <hr />
            <!--                <h3 class="section-subheading text-muted">-->
            <!--                    The material collected on this site was initiated as a book Indigenous Engineering for an Enduring-->
            <!--                    Culture </h3>-->
            <!--                <p>-->
            <!--                    The book <em class="hl-text">Indigenous Engineering for an Enduring Culture</em>-->
            <!--                    edited by Cat Kutay, Elyssebeth Leigh, Juliana Kaya Prpic and Lyndon Ormond-Parker </style> was-->
            <!--                    published in 2022 by Cambridge Scholars Publishing and is available as an eBook, hardback and-->
            <!--                    paperback. You can <a href="https://www.cambridgescholars.com/product/978-1-5275-8980-3#tabs-4"-->
            <!--                        class="hl-link">place orders on their site</a> for the book and <a-->
            <!--                        href="https://play.google.com/store/books/details/Cat_Kutay_Indigenous_Engineering_for_an_Enduring_C?id=_K2REAAAQBAJ&gl=GB"-->
            <!--                        class="hl-link">on Google Play</a> for the ebook. The stories here are an introduction to the-->
            <!--                    book and its authors.-->
            <!--                </p>-->
            <!--                <p>-->
            <!--                    More stories will be added by those who register and can contribute further information about their-->
            <!--                    own projects. We will put up instructions how to do this privately, within community, then how to-->
            <!--                    publish as collection you have gathered on your community, such as information that may encourage-->
            <!--                    tourism or language learning relating to Care for Country.-->
            <p class="p-content">The<strong> Living Archive of Aboriginal Languages</strong> is a digital archive of endangered literature
                in Australian Indigenous languages of the Northern Territory.</p>
            <p class="p-content">It contains nearly<strong> 4000 books</strong> in<strong> 50 languages</strong> from <strong>40
                communities</strong> available to read online or download freely.</p>
            <p class="p-content">This is a&nbsp;<i><b>living archive</b></i>, with connections to the people and communities where the
                books were created. This will allow for collaborative research work with the Indigenous authorities and
                communities.</p>
        </div>
    </div>
</section>
<!-- Maps-->
{% block content %}
<section class="page-section" id="maps">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Location of Projects</h2>
            <h3 class="section-subheading text-muted">Click on the map locations to see details .</h3>
        </div>

        <head>
            <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
            <title>Google Maps Multiple Markers </title>

            <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css"
                  integrity="sha256-kLaT2GOSpHechhsozzB+flnD+zUyjE2LlfWPgU04xyI=" crossorigin=""/>
            <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"
                    integrity="sha256-WBkoXOwTeyKclOHuWtc+i2uENFpDZ9YPdf5Hf+D7ewM=" crossorigin=""></script>
            <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"/>
            <link rel="stylesheet"
                  href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"/>
            <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"
                    crossorigin=""></script>
            <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css"/>
            <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
        </head>

        <body>
        <div id="map"></div>
        <script type="text/javascript">
            var string = ""
            string = "{% for post in posts %}{{ post.title }}@*&!{% endfor %}";
            var title = string.split("@*&!");

            string = "{% for post in posts %}{{ post.address }}@*&!{% endfor %}";
            var address = string.split("@*&!");

            string = "{% for post in posts %}{{ post.intro }}@*&!{% endfor %}";
            var intro = string.split("@*&!");

            string = "{% for post in posts %}{{ post.body }}@*&!{% endfor %}";
            var body = string.split("@*&!");

            string = "{% for post in posts %}{{ post.url }}@*&!{% endfor %}";
            var url = string.split("@*&!");

            string = "{% for post in posts %}{{ post.owner.id }}@*&!{% endfor %}";
            var uids = string.split("@*&!");

            string = "{% for post in posts %}{% image post.image fill-200x150 as blog_img %}{{blog_img.url}}@*&!{% endfor %}";
            var imgs = string.split("@*&!");

            var blogSet = {}
            for (let i = 0; i < uids.length; i++) {
                const uid = uids[i]
                if (uid === '') continue
                if (typeof (blogSet[uid]) === 'undefined') blogSet[uid] = []
                blogSet[uid].push([title[i], address[i], i, intro[i], body[i], url[i], imgs[i], uid])
            }

            var map = L.map('map', {attributionControl: false}).setView([-24.3000384, 140.0782539], 4);

            L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}', {
                maxZoom: 20,
                subdomains: ['mt0', 'mt1', 'mt2', 'mt3']
            }).addTo(map);

            L.Control.geocoder().addTo(map);

            let markerSet = []

            var myMarkerClusterGroup = L.markerClusterGroup()

            var colorSet = ['#F79327', '#DB005B', '#FF55BB', '#FFD3A3', '#FCFFB2', '#B6EAFA', '#B2A4FF', '#FF6969', '#B4FF9F']

            let index = 0
            for (const uid in blogSet) {
                if (Object.hasOwnProperty.call(blogSet, uid)) {
                    const locations = blogSet[uid];
                    const pointList = []

                    for (i = 0; i < locations.length; i++) {
                        const l = locations[i][1].split(",");
                        try {
                            // marker
                            const marker = L.marker([parseFloat(l[0]), parseFloat(l[1])]);

                            // line point
                            pointList.push(new L.LatLng(parseFloat(l[0]), parseFloat(l[1])))

                            let popup = L.popup().setLatLng([parseFloat(l[0]), parseFloat(l[1])]).setContent(
                                '<div id="content">' +
                                '<div id="siteNotice">' +
                                "</div>" +
                                '<h2 style="font-size:150%;" id="firstHeading" class="firstHeading">' + locations[i][0] + '</h1>' +
                                '<div id="bodyContent">' +
                                '<p style="font-size:130%;">' + locations[i][3] + '</p>' +
                                '<a href="' + locations[i][5] + '">' +
                                (locations[i][6] ? "<img src='" + locations[i][6] + "' width='200' height='150'> </a>" : '') +
                                '<p>Link: <a href="' + locations[i][5] + '">' + locations[i][0] +
                                "</p>" +
                                "</div>" +
                                "</div>")

                            marker.bindPopup(popup, {minWidth: 650}).openPopup();

                            markerSet.push(marker);
                            myMarkerClusterGroup.addLayer(marker)
                        } catch (error) {
                            console.log(error)
                        }
                    }

                    // draw line
                    if (pointList.length > 1) {
                        const myCustomColour = colorSet[index % colorSet.length]
                        index++
                        new L.Polyline(pointList, {
                            color: myCustomColour,// myCustomColour,
                            weight: 1.5,
                            opacity: 0.7,
                            smoothFactor: 1
                        }).addTo(map)
                    }
                }
            }

            map.addLayer(myMarkerClusterGroup)
        </script>
        </body>
    </div>
</section>


<!-- Projects Grid-->
<section class="page-section bg-light" id="projects">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Public Information on Projects</h2>
            <h3 class="section-subheading text-muted">Latest Pages</h3>
        </div>
        <div class="row">
            {% for post in posts|slice:":6" %}
            <div class="col-lg-4 col-sm-6 mb-4">
                <div class="portfolio-item pf-inner-box">
                    <div class="portfolio-caption title">
                        <div class="portfolio-caption-heading"><a href="{{ post.url }}"><b>{{ post.title }}</b></a>
                        </div>
                    </div>
                    <p></p>
                    <div class="portfolio-caption content" style="text-align: center">
                        <div class="portfolio-caption-heading"><a href="{{ post.url }}">{{ post.intro }}</a></div>
                    </div>
                    <p></p>
                    {% image post.image original as blog_img %}
                    <a href="{{ post.url }}">
                        <!--style="width:500px;height:200px;"-->
                        <img class="img-fluid" src="{{ blog_img.url }}" alt="{{ blog_img.alt }}">
                    </a>
                    {% if post.audio %}
                    <br/>
                    <p style="margin-top: 10px;; text-align: center;">
                        <audio controls>
                            <source src="{{ post.audio.url }}" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                    </p>
                    <br/>
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="more-link"><a href="/blog/">More</a></div>
    </div>
</section>

<!-- Team-->
<section class="page-section bg-light" id="team">
    <div class="container">
        <!--        <div class="text-center">
                <h2 class="section-heading text-uppercase">Our Team</h2>
                <h3 class="section-subheading text-muted"> </h3>
            </div>
-->
        <div class="row">
            <div class="col-lg-4">
                <div class="team-member">
                    <!--                    <img class="mx-auto rounded-circle" src="{% static 'assets/img/team/2.jpg' %}" alt="..." />
                        <h4>Dr. Cat Kutay</h4>
                        <p class="text-muted">Lead Lecturer</p>
-->
                    <!--
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        -->
                </div>
            </div>
            <div class="col-lg-4">
                <div class="team-member">
                    <img class="mx-auto rounded-circle" src="{% static 'assets/img/team/1.jpg' %}" alt="..."/>
                    <h4>Yunzhu Wang</h4>
                    <p class="text-muted">Lead Programmer</p>
                    <!--
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
        -->
                    <!--            <div class="col-lg-4">
                    <div class="team-member">
                        <img class="mx-auto rounded-circle" src="{% static 'assets/img/team/3.jpg' %}" alt="..." />
                        <h4>Tofan</h4>
                        <p class="text-muted">Lead Developer</p>
            <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                        <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
                        -->
                </div>
            </div>
        </div>
        <!--
            <div class="row">
                <div class="col-lg-8 mx-auto text-center"><p class="large text-muted">None of us, including me, ever do great things. But we can all do small things, with great love, and together we can do something wonderful. - Mother Teresa</p></div>
            </div>
            -->
    </div>
</section>
<!-- Clients-->
<div class="py-5">
    <div class="container">
        <div>
            <div>
                <a href="https://www.cdu.edu.au/" target="_blank" rel="noopener noreferrer"><img
                        class="img-fluid img-brand d-block mx-auto" src="{% static 'assets/img/logos/cdu.png' %}"
                        alt="..."/></a>
            </div>
            <!--
                <div class="col-md-3 col-sm-6 my-3">
                    <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="{% static 'assets/img/logos/google.svg' %}" alt="..." /></a>
                </div>
                <div class="col-md-3 col-sm-6 my-3">
                    <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="{% static 'assets/img/logos/facebook.svg' %}" alt="..." /></a>
                </div>
                <div class="col-md-3 col-sm-6 my-3">
                    <a href="#!"><img class="img-fluid img-brand d-block mx-auto" src="{% static 'assets/img/logos/ibm.svg' %}" alt="..." /></a>
                </div>
                -->
        </div>
    </div>
</div>
<!-- Contact-->
<section class="page-section" id="contact">
    <div class="container">
        <div class="text-center">
            <h2 class="section-heading text-uppercase">Contact Us</h2>
            <h3 class="section-subheading text-muted">{{ self.intro|richtext }}</h3>
        </div>
        <form id="contactForm" action="{% pageurl page %}" method="POST" onsubmit="showThanksMessage(event)">
            <div class="row align-items-stretch mb-5">
                <div class="col-md-6">
                    {% csrf_token %}
                    <div class="form-group">
                        <!-- Name input-->
                        <input class="form-control" name="{{ form.name.html_name }}"
                               id="{{ form.name.id_for_label }}" type="text" placeholder="Your Name *"
                               data-sb-validations="required"/>
                        <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                    </div>
                    <div class="form-group">
                        <!-- Email address input-->
                        <input class="form-control" name="{{ form.email.html_name }}"
                               id="{{ form.email.id_for_label }}" type="email" placeholder="Your Email *"
                               data-sb-validations="required,email"/>
                        <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                        <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                    </div>
                    <div class="form-group mb-md-0">
                        <!-- Phone number input-->
                        <input class="form-control" name="{{ form.phone.html_name }}"
                               id="{{ form.phone.id_for_label }}" type="number" placeholder="Your Phone *"
                               data-sb-validations="required"/>
                        <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group form-group-textarea mb-md-0">
                        <!-- Message input-->
                        <textarea class="form-control" name="{{ form.message.html_name }}"
                                  id="{{ form.message.id_for_label }}" placeholder="Your Message *"
                                  data-sb-validations="required"></textarea>
                        <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.
                        </div>
                    </div>
                </div>
                <div class="g-recaptcha" data-callback="correctCaptcha"
                     data-sitekey="6LdIMWMmAAAAAF5D0LJkeFzjSqOU14B5H4FZHgVw"></div>
                <!--<div class="g-recaptcha" data-sitekey="6LfsIJYjAAAAAMOjW3Ysb4IdNQyxRatxcu1PmavL"></div> -->

                <br/>
            </div>

            <div class="text-center"><input id="submit-button" type="submit" disabled value="SEND MESSAGE"
                                            class="btn btn-primary btn-xl text-uppercase active">
            </div>

        </form>
        <script>
            function correctCaptcha() {
                // This function will be called when the user successfully completes the captcha
                document.getElementById("submit-button").disabled = false;
            }
        </script>

        <script>
            function showThanksMessage(event) {
                alert('Thanks for your submission!');
            }
        </script>

    </div>
</section>
{% endblock content %}
<!-- Footer-->
<footer class="footer py-4">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-4 text-lg-start"></div> <!-- Copyright &copy; Your Website 2022</div>-->
            <div class="col-lg-4 my-3 my-lg-0">
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-twitter"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-facebook-f"></i></a>
                <a class="btn btn-dark btn-social mx-2" href="#!"><i class="fab fa-linkedin-in"></i></a>
            </div>
            <!--
           <div class="col-lg-4 text-lg-end">
                    <a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
                    <a class="link-dark text-decoration-none" href="#!">Terms of Use</a>
                </div>
       -->
        </div>
    </div>
</footer>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script type="text/javascript" src="{% static 'js/scripts.js' %}"></script>
<script type="text/javascript" src="https://www.google.com/recaptcha/api.js"></script>
</body>

</html>